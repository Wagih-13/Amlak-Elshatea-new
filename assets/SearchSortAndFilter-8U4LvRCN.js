import{r as c,c as U,B as C}from"./index-UIuYEt_z.js";import{u as m}from"./useUrlPosition-A257oiwN.js";import{a as d}from"./useUnitRating-ptpjBbi-.js";function p(){const{city:o,type:t,from:r,to:e,district:a}=m(),[s,u]=c.useState([]),[l,n]=c.useState(!1);return c.useEffect(()=>{(async()=>{n(!0);try{const i=await U.post(`${C}/MainSearchUnits?strAreaUnitCityCode=${o}&strAreaUnitCategoryCode=${t}&strAvailableDateFrom=${r}&strAvailableDateTo=${e}&strAreaUnitDistrictCode=${a}`);u(i.data)}catch(i){console.error(i)}finally{n(!1)}})()},[o,t,r,e,a]),{searchResults:s,loadingSearchResults:l}}const v=[{key:"0",value:"DEFAULT"},{key:"1",value:"MY_FAV"},{key:"2",value:"RATING"},{key:"3",value:"HIGHEST_PRICE"},{key:"4",value:"LOWEST_PRICE"}],E=(o,t)=>{const[r]=d("favunits",[]),e=a=>r.includes(a);switch(t){case"0":return o;case"1":return o.toSorted((a,s)=>Number(e(s.areaUnitCode))-Number(e(a.areaUnitCode)));case"2":return o.toSorted((a,s)=>+s.areaUnitAvgRating-+a.areaUnitAvgRating);case"3":return o.toSorted((a,s)=>+s.areaUnitPrice-+a.areaUnitPrice);case"4":return o.toSorted((a,s)=>+a.areaUnitPrice-+s.areaUnitPrice);default:return o}},P=(o,t)=>{let r=o;return r=r.filter(e=>+e.areaUnitPrice>=(t.minPrice||0)&&+e.areaUnitPrice<=(t.maxPrice||Number.MAX_VALUE)),r=r.filter(e=>{var a;return e.areaUnitName.toLocaleLowerCase().includes(((a=t.areaUnitName)==null?void 0:a.toLocaleLowerCase())||"")}),r=r.filter(e=>{var a;return e.areaUnitAddress.toLocaleLowerCase().includes(((a=t.address)==null?void 0:a.toLocaleLowerCase())||"")}),r=r.filter(e=>+e.areaUnitCapacity>=(t.minCapacity||0)&&+e.areaUnitCapacity<=(t.maxCapacity&&t.maxCapacity>-1?t.maxCapacity:Number.MAX_VALUE)),r=r.filter(e=>+e.areaUnitCarsNo>=(t.minCars||0)&&+e.areaUnitCarsNo<=(t.maxCars&&t.maxCars>-1?t.maxCars:Number.MAX_VALUE)),r=r.filter(e=>{var a;return e.areaUnitCode.toLocaleLowerCase().includes(((a=t.areaUnitCode)==null?void 0:a.toLocaleLowerCase())||"")}),r};export{P as F,E as S,v as a,p as u};
