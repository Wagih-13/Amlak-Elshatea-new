import{u as V,i as F,r as o,j as t,L as I}from"./index-UIuYEt_z.js";import{A as M,p as T}from"./AsYouType-UNDLlEB-.js";import{g as B,P as K}from"./index-zw25BQSK.js";import{F as H}from"./index.es-UzAdvkII.js";import{d as $}from"./index-5OaO6oW1.js";import{L as q}from"./LeftAddUnit-wT1RRPzM.js";import{M as N}from"./MainButton-7s5prsiZ.js";import"./index-KREtgCyx.js";const z=4,G=2;function ee(){const{t:i}=V(),{data:{verificationCode:k},getOtp:c,authenticateUser:u,status:A,statusMsg:E}=F(),[n,P]=o.useState(1),[l,_]=o.useState(),[C,j]=o.useState(!1),[p,b]=o.useState([]),d=o.useRef(null),[w,R]=o.useState("SA"),f=e=>{try{const r=new M().input(e||""),s=T(r,"SA");return s?{parsed:s.isValid(),countryCode:s.countryCallingCode,number:s.formatNational().replace(/\s/g,"")}:{parsed:!1}}catch(r){return console.error("Error validating phone number:",r),{parsed:!1}}},S=(e,r)=>{var m;const s=e.target.value,a=(m=d.current)==null?void 0:m.children;s.length===0&&r>0&&a[r-1].focus(),s.length===1&&(r<a.length-1?(a[r+1].focus(),b(y=>y.map((h,L)=>L===r+1?"":h))):a[r].blur()),b(y=>{const h=[...y];return h[r]=s,h})},v=o.useCallback(()=>{n<G&&P(e=>e+1)},[n]),x=o.useCallback(async()=>{const e=f(l),r=e.countryCode,s=e.number;r&&s&&(c==null||c(s,r))},[c,l]),g=o.useCallback(()=>{u==null||u(f(l).number||"",p.join(""))},[u,l,p]),D=(e,r)=>{var a;const s=(a=d.current)==null?void 0:a.children;e.key==="ArrowLeft"?r>0&&s[r-1].focus():e.key==="ArrowRight"?r<s.length-1&&s[r+1].focus():e.key==="Home"?s[0].focus():e.key==="End"&&s[s.length-1].focus()};return o.useEffect(()=>{var e;n===2&&((e=d.current)==null?void 0:e.firstChild).focus()},[n]),o.useEffect(()=>{const e=r=>{r.key=="Enter"&&(n===1?(x(),v()):n===2&&g())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n,x,v,g]),o.useEffect(()=>{var e;(e=document.getElementsByClassName("PhoneInputCountry").item(0))==null||e.setAttribute("data-country-code","+"+B(w))},[w]),t.jsxs("div",{className:"flex h-[100vh] w-[100vw]",children:[t.jsxs("div",{className:"left-logo-0",children:[t.jsx("div",{className:"absolute left-0 top-0 z-[15] h-full w-full bg-gradient-to-b from-[var(--dark-90)] to-[#5a4b64b6]"}),t.jsx(q,{})]}),t.jsxs("div",{className:"right-form relative flex items-center justify-center dark:bg-[#19131D]",children:[t.jsxs("div",{className:"add-unit-form flex !h-[300px] w-[400px] flex-col justify-center rounded-[12px] border border-[#D5D5D5] sm:w-[550px]",children:[n===1&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("h1",{children:i("verfiy_number.title")}),t.jsx("p",{children:i("verfiy_number.sub_title")})]}),t.jsx(K,{placeholder:i("verfiy_number.placeholder"),value:l,onChange:e=>{_(e),j(f(e).parsed)},onBlur:()=>{j(f(l).parsed)},defaultCountry:"SA",className:`cus-foucs w-full border rounded-[8px] rtl:flex-row-reverse ${C?"valid":""}`,international:!1,onCountryChange:e=>{R(e||"SA")}}),t.jsx(N,{className:"w-full rounded-[8px] border bg-[#5a4b64] p-2 text-white focus:outline-none disabled:cursor-not-allowed disabled:bg-[#ecd6fc] dark:bg-[var(--main-color)] dark:disabled:bg-[#463c2a]",onClick:()=>{x(),v()},disabled:!C,children:i("verfiy_number.continue")})]}),n===2&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("h1",{children:i("verfiy_number.verfiy_num")}),t.jsxs("p",{children:[i("verfiy_number.enter_verfiy")," ",l]})]}),t.jsxs("div",{className:"mx-auto w-[75%] space-y-4 dark:text-[var(--white-color)]",children:[t.jsx("div",{className:"verification-code-input",ref:d,children:Array.from({length:z}).map((e,r)=>t.jsx("input",{className:"rounded-[8px] border text-center placeholder:text-[25px] dark:bg-[inherit]",placeholder:"*",value:p[r]||"",onChange:s=>S(s,r),onKeyDown:s=>D(s,r),onFocus:()=>{b(s=>s.map((a,m)=>m===r?"":a))},type:"number",min:0,max:9,maxLength:1,pattern:"[0-9]*",inputMode:"numeric"},r))}),t.jsxs(N,{onClick:g,className:"w-full cursor-pointer rounded-[1rem] bg-[var(--main-dark)] p-[1rem] px-[2rem] font-bold text-[var(--white-color)] hover:bg-[#99845C] dark:bg-[var(--main-color)]",children:[i("verfiy_number.send"),t.jsx("br",{})," ",k]}),t.jsx("div",{className:`text-red-500 text-center ${A==="error"?"":"hidden"}`,children:E})]})]})]}),t.jsx(I,{to:"/",className:"absolute start-10 top-10 cursor-pointer text-[2rem] text-[#18131C] hover:text-[#4A3C53] dark:text-[var(--primary-color)] hover:dark:text-[var(--white-color)]",children:t.jsx(H,{icon:$})})]})]})}export{ee as default};
